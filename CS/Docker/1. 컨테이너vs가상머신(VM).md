## 서버 가상화(Virtualization)

```tex
▫️ 물리적인 컴포넌트를 논리적인 객체로 추상화하는 것
```

+ 특징
  + 마치 하나의 장치를 여러 개처럼 동작시키거나 or 반대로 여러 개의 장치를 묶어 마치 하나의 장치인 것처럼 사용자에게 공유 자원으로 제공할 수 있는 것 → 클라우드 컴퓨팅 구현을 위한 핵심 기술임
  + 가상화의 대상이 되는 컴퓨팅 자원 : 프로세서(CPU) / 메모리(Memory) / 스토리지(Storage) / 네트워크(Network)
  + 서버 or 장치를 가상화함으로써 높은 수준의 자원 사용율과 분산 처리 능력을 제공함

<br/>

# 컨테이너(Container)

```tex
▫️ 소프트웨어의 실행에 필요한 실행환경을 독립적으로 운용할 수 있도록 기반환경 or 다른 실행 환경과의 간섭을 막고 실행의 독립성을 확보새주는 운영체제 수준의 격리 기술
```

+ 특징
  + 호스트 운영체제의 커널을 공유하며 격리된 컴퓨팅 자원을 제공하는 가상화 기술임
  + 소프트웨어 서비스를 실행하는데 필요한 특정 버전의 프로그래밍 언어 런타임 및 라이브러리와 같은 종속 항목과 애플리케이션 코드를 함께 포함하는 경량 패키지
  + 운영체제 수준에서 CPU, 메모리, 스토리지, 네트워크 리소스를 쉽게 공유할 수 있게 해줌
  + 컨테이너가 실제로 실행되는 환경에서 애플리케이션을 추상화할 수 있는 논리 패키징 메커니즘을 제공함
+ 장점
  + 부팅이 빠름
  + 메모리 사용량이 적음
+ 단점
  + 자원의 격리와 쿼터 제한이 어려움
  + 호스트 운영체제에 실행 환경이 묶임

<br/>

# 가상머신(VM, Virtual Machine)

```tex
▫️ 물리적 HW 시스템에 구축되어 자체 CPU, 메모리, 네트워크 인터페이스, 스토리지를 갖추고 가상 컴퓨터 시스템으로 작동하는 가상 환경
```

+ 특징
  + 하나의 물리적인 컴퓨터 위에 하이퍼바이저가 존재하여 HW자원을 가상화한 레이어를 제공함
    + **하이퍼바이저(Hypervisor)** : 하나의 물리적인 컴퓨터 위에 여러 개의 Guest(VM)를 동시에 실행할 수 있게 가상화하는 플랫폼
  + VM은 하이퍼바이저 위에서 필요한 만큼의 자원이 할당된 가상의 컴퓨터 → 각각의 VM은 서로 간의 존재를 알 수 없음 + 커널을 포함한 OS는 독립적으로 실행됨
+ 장점
  + 물리적인 컴퓨터와 기능면에서 차이가 없음 → 다양한 작업이 가능함
+ 단점
  + 컨테이너에 비해 무겁고 느림
+ 사용하는 경우
  + 일반적으로 클라우드 환경에서 인프라를 프로비저닝하는 경우
  + 환경을 분리 or 전총적인 Monolithic Architecture 기반의 서비스를 운영하는 경우

<br/>

# 컨테이너 vs 가상머신(VM)

<img src="https://user-images.githubusercontent.com/33214969/149672364-463acf5e-08fc-4771-9b67-d786a3e9eb96.png" alt="컨테이너vs가상머신.png" width="100%;" />

|                     | 컨테이너                                                     | 가상머신                                                     |
| ------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 시작 시간           | 짧다 (초 단위)                                               | 길다 (분 단위)                                               |
| 컨테이너 무게       | MB<br />(애플리케이션 + SW)                                  | GB<br />(OS + 애플리케이션 + SW)                             |
| Guest OS            | Host OS와 동일한 OS                                          | Windows/Linux 등 선택 가능                                   |
| 이식성              | 컨테이너 이미지 그대로 사용 가능                             | 대부분 가상 이미지에 대한 변환 필요                          |
| Guest OS와의 관계   | Host OS를 커널 수준으로 분리 → OS를 가상화 형태로 사용. 필요에 다라 소프트와 리소스 공유 가능 | Guest OS를 (가상)HW로 인식                                   |
| 시스템 성능         | 컨테이너화된 애플리케이션은 완전한 가상 머신보다 리소스를 더 적게 사용하고 + 호스트 메모리에 가해지는 부담을 줄일 수 있도록 운영 체제 환경(커널)을 공유함 | 각 가상머신마다 전용 운영 체제가 있음 → 가상머신에 구축된 애플리케이션을 실행할 때 메모리 사용량이 필요 이상으로 많아짐 → 가상 머신이 호스트에 필요한 리소스를 모두 사용할 수 있음 |
| 유지관리 & 업데이트 | 컨테이너 호스트의 운영 체제만 업데이트 → 유지관리가 매우 간소화됨 | 운영 체제를 업데이트 or 패치할 경우 기존 컴퓨터를 하나씩 업데이트해야 함 → 각 게스트 OS를 개별적으로 패치해야 함 |
| 작동 방법           | 1. 컨테이너는 마이크로서비스 or 애플리케이션과 이를 실행하는데 필요한 모든 것(이미지)이 포함되어 있음<br />2.이미지라고 하는 모든 라이브러리와 종속성을 포함하는 코드 기반 파일에 저장됨<br />3.이 이미지는 RPM 패키지 및 구성 파일과 함꼐 제공됨 → 이 파일은 Linux 배포 설치로 간주될 수 있음<br />4. 컨테이너는 너무 작기 때문에 일반적으로 수백 개가 서로 누슨하게 결함되어 있음 → 컨테이너 오케스트레이션 플랫폼(ex. 쿠버네티스)을 사용하여 컨테이너를 프로비저닝 & 관리함 | 1. 하이퍼바이저라는 SW는 리소스가 파티셔닝되어 가상머신(VM)전용으로 할당될 수 있도록 리소스를 물리 머신에서 분리함<br />2. 사용자가 물리 환경의 추가 리소스를 요구하는 VM 명령을 발행하면 → 하이퍼바이저는 이 요청을 물리 시스템으로 전달 & 변경 사항을 캐싱함<br />3. VM은 물리 서버처럼 작동함 → 애플리케이션 종속성 및 대규모 OS 설치 공간의 단점을 증대함 |
| 용도                | - 클라우드 네이티브 애플리케이션 빌드<br />- 마이크로서비스 패키징<br />- DevOps or CI/CD 프랙티스 촉진<br />- 동일한 OS를 공유하는 다양한 IT 설치 공간에서 확장 가능한 IT 프로젝트 전환 | - 기존, 레거시 및 모놀로식 워크로드 수용<br />- 위험한 개발 사이클 분리<br />- 인프라 리소스(ex. 네트워크, 서버, 데이터) 프로비저닝<br />- 다른 OS에서 또 다른 OS 실행 |