# 8. SQL 응용

## **Section 072. SQL - DDL**

1. **DDL(데이터 정의어)** : DB 구조, 데이터 형식, 접근 방식 등 DB를 구축/수정할 목적으로 사용하는 언어

2. **CREATE SCHEMA** : 스키마를 정의하는 명령문

   ```sql
   CREATE SCHEMA 스키마명 AUTHORIZATION 사용자_id;
   ```

3. **CREATE DOMAIN** : 도메인을 정의하는 명령문

   ```sql
   CREATE DOMAIN 도메인명 [AS] 데이터_타입
              [DEFAULT 기본값]
              [CONSTRAINT 제약조건명 CHECK (범위값)];
   ```

4. **CREATE TABLE** : 테이블을 정의하는 명령문

   ```sql
   CREATE TABLE 테이블명
              (속성명 데이터_타입 [DEFAULT 기본값] [NOT NULL], …
              [, PRIMARY KEY(기본키_속성명, …)]
              [, UNIQUE(대체키_속성명, …)]
              [, FOREIGN KEY(외래키_속성명, …)]
                        REFERENCES 참조테이블(기본키_속성명, …)]
                        [ON DELETE 옵션]
                        [ON UPDATE 옵션]
              [, CONSTRAINT 제약조건명] [CHECK (조건식)]);
   ```

5. **CREATE VIEW** : 뷰(View)를 정의하는 명령문

   ```sql
   CREATE VIEW 뷰명[(속성명[, 속성명, …])]
   AS SELETE문;
   ```

6. **CREATE INDEX** : 인덱스를 정의하는 명령문

   ```sql
   CREATE [UNIQUE] INDEX 인덱스명
   ON 테이블명(속성명 [ASC | DESC] [, 속성명 [ASC | DESC]])
   [CLUSTER];
   ```

7. **ALTER TABLE** : 테이블에 대한 정의를 변경하는 명령문

   ```sql
   ALTER TABLE 테이블명 ADD 속성명 테이터_타입 [DEFAULT '기본값'];
   ALTER TABLE 테이블명 ALTER 속성명 [SET DEFAULT '기본값'];
   ALTER TABLE 테이블명 DROP COLUMN 속성명 [CASCADE];
   ```

8. **DROP** : 스키마, 도메인, 기본 테이블, 뷰 테이블, 인덱스, 제약 조건 등을 제거하는 명령문

   ```sql
   DROP SCHEMA 스키마명 [CASCADE | RESTRICTED];
   DROP DOMAIN 도메인명 [CASCADE | RESTRICTED];
   DROP TABLE 테이블명 [CASCADE | RESTRICTED];
   DROP VIEW 뷰명 [CASCADE | RESTRICTED];
   DROP INDEX 인덱스명 [CASCADE | RESTRICTED];
   DROP CONSTRAINT 제약조건명;
   ```

<br/><br/>

## **Section 073. SQL - DCL**

1. **DCL(데이터 제어어)** : 데이터의 보안, 무결성, 회복, 병행 제어 등을 정의하는데 사용하는 언어

2. **GRANT / REVOKE**

   + **GRANT** : 권한 부여를 위한 명령어

   + **REVOKE** : 권한 취소를 위한 명령어

   + 사용자등급 지정 or 해제

     ```sql
     GRANT 사용자등급 TO 사용자_ID_리스트 [IDENTIFIED BY 암호];
     REVOKE 사용자등급 FROM 사용자_ID_리스트;
     ```

   + 테이블 및 속성에 대한 권한 부여 및 취소

     ```sql
     GRANT 권한_리스트 ON 개체 TO 사용자 [WITH GRANT OPTION];
     REVOKE [GRANT OPTION FOR] 권한_리스트 ON 개체 FROM 사용자 [CASCADE];
     ```

     + WITH GRANT OPTION : 부여 받은 권한을 다른 사용자에게 다시 부여할 수 있는 권한을 부여함
     + GRANT OPTION FOR : 다른 사용자에게 권한을 부여할 수 있는 권한을 취소함
     + CASCADE : 권한 취소 시 권한을 부여 받았던 사용자가 다른 사용자에게 부여한 권한도 연쇄적으로 취소함

3. **COMMIT** : 트랜잭션이 성공적으로 끝나면 DB가 새로운 일관성(Consistency) 상태를 가지기 위해 변경된 모든 내용을 DB에 반영해야함 -> 이 때 사용하는 명령어

4. **ROLLBACK** : 아직 COMMIT되지 않은 변경된 모든 내용들을 취소하고 DB를 이전 상태로 되돌리는 명령어

5. **SAVEPOINT** : 트랜잭션 내에 ROLLBACK 할 위치인 저장점을 지정하는 명령어

<br/><br/>

## **Section 074. SQL - DML**

1. **DML(데이터 조작어)** : DB 사용자가 응용 프로그램 or 질의어를 통해 저장된 데이터를 실질적으로 관리하는데 사용되는 언어

2. **삽입문** : 기본 테이블에 새로운 튜플을 삽입할 때 사용

   ```sql
   INSERT INTO 테이블명([속성명1, 속성명2, ...])
   VALUES (데이터1, 데이터2, ...);
   ```

3. **삭제문** : 기본 테이블에 있는 튜플들 중 특정 튜플(행)을 삭제할 때 사용함

   ```sql
   DELETE
   FROM 테이블명
   [WHERE 조건];
   ```

4. **갱신문** : 기본 테이블에 있는 튜플들 중 특정 튜플의 내용을 변경할 때 사용

   ```sql
   UPDATE 테이블명
   SET 속성명 = 데이터[, 속성명=데이터, ...]
   [WHERE 조건];
   ```

<br/><br/>